---
title: "assignement1_eco"
format: pdf
editor: visual
<<<<<<< HEAD
=======

>>>>>>> 0c13c02c24276c2660a9e9b8a496a0a93d8ee8f7
bibliography: references.bib
author: emilie_ingrid
---

## Assignment 1: Data and Descriptive

This assignment is intended to gather, process, and analyze sub-national GDP and population data for a selection of European countries.
We will calculate GDP per capita and investigate regional disparities using various descriptive statistics and visualizations.

We have been tasked with analyzing Ireland, Poland, Spain, Slovenia, the Netherlands, Greece, Norway, Albania from the year 2000 to 2020.

When we had been working on the assignment for a while, we realized that we had downloaded a dataset for GDP.
Given that we had already performed several calculations, we decided to select the countries we no longer needed instead of reloading the dataset.
As a result, there are a few chunks that include selections to ensure the dataset was adjusted accordingly.

```{r}
#| label: setup
#| message: false
#| output: false
library(tidyverse)
library(dplyr)
library(dineq)
library(ineq)
library(magrittr)
```

## Part A : Sub-national GDP and GDP per Capita

### **1 . Data Acquisition:**

#### Dataset: GDP

This dataset is a sub-regional GDP dataset for a selection of our European countries.
GDP stands for Gross Domestic Product, and it is a key economic indicator used to measure the overall economic health and performance of a country or region @zotero-122.
The variables relevant to us are;

GEO: this variable show us the geopolitical entity.

Time_Period: this variable shows us the time period in years.

Obs_Value: this variable shows us the value of GDP.

```{r}
GDP <- read_csv("GDP.csv", show_col_types = FALSE)
```

```{r}
#In order to obtain accurate GDP figures, we had to select 'MIO_EUR' as the unit, as it represents the GDP values.
NO_GDP <- GDP |> 
  filter(str_sub(geo,1,2) == "NO") |> 
  filter(unit == "MIO_EUR")
```

```{r}
dim(GDP)
```

As mentioned earlier, we initially had all the countries in a single dataset and had to perform selections accordingly.
Will reduce it after getting population.

Before we start calculating the GDP per inhabitant for each sub-region, we want to "clean up" the dataset so that we only include the necessary variables:

```{r}
# We rename one of the variables and select the ones we want
GDP <- GDP |> 
  select(year = TIME_PERIOD, unit, geo, gdp = OBS_VALUE)
```

#### Dataset: Population

This dataset is a dataset about population for a selection of our European countries.
Population refers to the total number of individuals of a particular species or group inhabiting a specific area or planet at a given time.The variables relevant to us are;

GEO: this variable show us the geopolitical entity.

Time_Period: this variable shows us the time period in years.

Obs_Value: this variable shows us the value of GDP.

```{r}
population <- read_csv("population.csv", show_col_types = FALSE)
```

We will do the same as on the previous data set by selecting the necessary variables:

```{r}
# We rename one of the variables and select the ones we want
population <- population |> 
  select(year = TIME_PERIOD, geo, population = OBS_VALUE)
```

Find unique geo codes in population.
Use these to reduce GDP.

```{r}
nuts_pop <- population |> 
  select(geo) |> 
  distinct() |> 
  pull()
```

```{r}
nuts_gdp <- GDP |> 
  select(geo) |> 
  distinct() |> 
  pull()
```

```{r}
# in pop, not in GDP
nuts_inpop_notinGDP <- setdiff(nuts_pop, nuts_gdp)
```

Reduces GDP to same zones as in population.

```{r}
GDP <- GDP |>
  filter(geo %in% nuts_pop) |> 
  filter(unit == "MIO_EUR") |> 
  select(-unit)
```

### **2. GDP per Capita Calculation:**

Now we will calculate GDP per capita for each subregion.
The first thing we need to do is combine the two datasets into one.

```{r}
merged_data <- left_join(population, GDP, join_by(year, geo)) |> 
    filter(!geo %in% nuts_inpop_notinGDP)
```

```{r}
NO_merged <- merged_data |> 
  filter(str_sub(geo,1,2) == "NO") 
```

```{r}
# Clean up just to get rid of datasets we dont need.
rm(GDP, population)
```

The formula we have used to find GDP per capita is:

![](images/formel.png){fig-align="center"}

```{r}
merged_data <- merged_data |> 
  mutate(
    GDP_per_capita = round(1000000*gdp/population, digits = 0)
  ) |> 
  rename(gdp_MIO = gdp)
```

In the formula we have added \*1000000 to get the number as a EUR per capita and further we have included "digits=0" to limit it down.

### **3. Descriptive Analysis:**

Furthermore, we will examine and provide interpretations for various statistical measures in the various countries;

```{r}
result <- merged_data |> 
  mutate(
    geo_2 = str_sub(geo, start = 1L, end = 2L)
  ) |> 
  filter(geo_2 %in% c("ES", "NO", "IE", "PL", 
                      "NL", "AL", "EL", "SI")
         ) |> 
  # tar bort data for obs som ikke har verdier 
  # for GDP helt fra 2008
  filter(!is.na(GDP_per_capita)) |> 
  group_by(geo_2) |> 
  summarize(
    Mean = mean(GDP_per_capita),
    Variance = var(GDP_per_capita),
    Max = max(GDP_per_capita),
    Min = min(GDP_per_capita)
  )
```

```{r}
result |> 
  knitr::kable()
```

## Part B: Regional Inequity

### **1. Literature Review:**

Regional inequality refers to the significant disparities in economic development, resource allocation, quality of life, and access to services that exist among different geographical areas within a nation or region.
<<<<<<< HEAD
These disparities may encompass varying income levels, employment opportunities, educational standards, healthcare, and the quality of infrastructure in different regions.@zotero-118
=======
These disparities may encompass varying income levels, employment opportunities, educational standards, healthcare, and the quality of infrastructure in different regions.

@zotero-118 **KANSKJE SKRIVE NOE OM STUDIEN TIL ARTIKKELEN**
>>>>>>> 0c13c02c24276c2660a9e9b8a496a0a93d8ee8f7

And why do we care about regional inequality?

We care about regional inequality for several reasons.
Firstly, it is a matter of justice and social inclusion.
Inequality among regions leads to an unfair distribution of opportunities and resources, which can create social unrest and dissatisfaction among the population.
This can also result in certain areas being neglected and underdeveloped while others prosper economically and socially.
@zotero-118

Furthermore, regional inequality affects economic growth and stability.
Regions with lower levels of development can impede the national economy as they do not contribute optimally to economic production.
At the same time, significant disparities among regions can threaten political stability and national unity, as they can lead to conflicts and political polarization.
<<<<<<< HEAD
Therefore, it is in the interest of society to reduce regional inequality to promote fairness, economic prosperity, and political harmony.
@zotero-118
=======
Therefore, it is in the interest of society to reduce regional inequality to promote fairness, economic prosperity, and political harmony.\@zotero-118
>>>>>>> 0c13c02c24276c2660a9e9b8a496a0a93d8ee8f7

### **2. Gini Coefficient Calculation:**

Next, we will calculate the population-weighted GDP Gini coefficients for each European NUTS2 level region in our countries, using the NUTS3 GDP per capita data and the formula we were given.

First we use the "merge" function to create three new columns in "merged_data" by retrieving substrings from the existing "geo" column.
This can be useful for creating categories based on different levels of NUTS geographic regions (NUTS3, NUTS2, and NUTS0) based on the first characters of "geo":

```{r}
merged_data_temp <- merged_data %>%
  mutate(id_nuts3 = geo, 
         id_nuts2 = substr(geo, 1, 4),
         id_nuts0 = substr(geo, 1, 2)) 
```

Then we use the package "magritt" to be able to update the dataframe "merged_data_temp" with the result of the subsequent operations.
We then need to filter out the rows that either have NA or 0 values.
Then we group the data by column id_nuts2" and "year". Furthermore, we add a new column called "gini_n2" in the dataframe, using the formula we were given. It calculates the Gini coefficient based on "data_per_capita" and uses "population" as weight.Finally, we remove the grouping created earlier with group_by().This is useful when you want to work with the entire dataframe again after a group operation.

```{r}
merged_data_temp %<>% 
  filter(population != "NA") %>%
filter(population != 0) %>%
  filter(GDP_per_capita != "NA") %>%
  group_by(id_nuts2, year) %>%
  mutate(gini_n2 = gini.wtd(GDP_per_capita, weights = population)) %>%
  ungroup()
```

### **3. Data Presentation**

```{r}
result2 <- merged_data_temp |> 
  mutate(
    id_nuts2 = str_sub(id_nuts2, start = 1L, end = 2L)
  ) |> 
  filter(id_nuts2 %in% c("ES", "NO", "IE", "PL", 
                      "NL", "AL", "EL", "SI")
         ) |> 
  # tar bort data for obs som ikke har verdier 
  # for GDP helt fra 2008
  filter(!is.na(gini_n2)) |> 
  group_by(id_nuts2) |> 
  summarize(
    Mean = mean(gini_n2),
    Variance = var(gini_n2),
    Max = max(gini_n2),
    Min = min(gini_n2)
  )
```

```{r}
result2 |> 
  knitr::kable()
```

The Gini coefficients help us assess the economic inequality of a population or the distribution of income and wealth among the members of that population.

The Gini coefficient is usually a value between 0 and 1, where 0 indicates complete equality (everyone has the same income or wealth), and 1 indicates complete inequality (one person has all the income or wealth, while everyone else has none).
@zotero-120

## **3. Data Presentation & Discussion**

```{r}
library(ggplot2)
library(dplyr)
```

```{r}
main_data_nuts2 <- merged_data_temp %>%
  group_by(id_nuts2, year) %>%
  arrange(id_nuts2, year) %>%
  filter(row_number() == 1)
```

```{r}


ggplot(main_data_nuts2, aes(x = year, y = gini_n2, color = id_nuts2)) +
  geom_point() +
  labs(title = "Scatter Plot of Gini-koeffisienter over time",
       x = "Year",
       y = "Gini-koeffisient") +
  theme_minimal()
```

Comment:

Here is a plot of all the countries we have been tasked to analyze.
Albania stands out as it only has data available from 2012 to 2020.
We can also observe that Albania has a significantly higher Gini value, slightly above 0.8.
This suggests that there are substantial income inequalities within the country.

```{r}

main_data_nuts2 |> 
  filter(id_nuts0 == "PL" | 
           id_nuts0 == "IE") |> 
  ggplot(aes(x = year, y = gini_n2, color = id_nuts2)) +
  geom_line() +
  labs(title = "Scatter Plot av Gini-koeffisienter over tid",
       x = "Ã…r",
       y = "Gini-koeffisient") +
  theme_minimal()
```

Comments:

In our analysis, we initially examined each country individually but eventually decided to include only Poland and Ireland in the plot due to the substantial differences and variations they exhibited.
What stands out with Poland is the extreme variability in the Gini coefficient.
This holds true for all regions within Poland, suggesting significant fluctuations in income inequality.
The same pattern is observed in Ireland.
Take, for example, the "Eastern and Midland Region," which had a Gini coefficient of approximately 0.43 in 2014, decreased to around 0.41 in 2015, and then increased to nearly 0.46 in 2020.

It's also worth noting Spain.
All the regions in Spain exhibit remarkable stability throughout the time period from 2000 to 2020, but there is a significant disparity between regions in terms of Gini coefficients, ranging from the lowest to the highest values.
Asturias has the lowest Gini coefficient, with a score of approximately 0.3, while Melilla has the highest Gini coefficient at 0.65.

Last comment and conclusion;

The observed variation in income inequality among regions within the assigned countries holds profound significance.
It underscores the need for targeted, region-specific interventions to address and alleviate disparities in income distribution and advance economic equity at the local level.
These variations in Gini coefficients indicate that a one-size-fits-all approach to economic policy may not be effective, as the factors driving income inequality can differ substantially between regions.

Furthermore, this regional disparity challenges political decision-makers to prioritize and consider these differences when formulating, enacting, and evaluating economic and social policies.
Policymakers must be mindful of the unique economic circumstances and challenges faced by different regions, and this awareness should inform the design of policies that aim to reduce income inequality and promote a more inclusive and equitable economic environment.
The tailored, region-specific strategies can help optimize the effectiveness of such policies, ensuring that they resonate with the specific needs and realities of each region.
